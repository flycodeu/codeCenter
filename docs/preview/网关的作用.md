---
title: ç½‘å…³çš„ä½œç”¨
createTime: 2025/07/23 13:28:19
permalink: /article/eqxj84wl/
cover: 
tags:
  - ç½‘å…³
---
# API ç½‘å…³çš„æ ¸å¿ƒèŒè´£ä¸å®è·µæ–¹å¼

åœ¨ç°ä»£åˆ†å¸ƒå¼æ¶æ„ä¸­ï¼ŒAPI ç½‘å…³ï¼ˆAPI Gatewayï¼‰ä½œä¸ºæœåŠ¡è°ƒç”¨çš„ç»Ÿä¸€å…¥å£ï¼Œæ˜¯ç³»ç»Ÿæ¶æ„ä¸­å¿…ä¸å¯å°‘çš„åŸºç¡€ç»„ä»¶ã€‚å®ƒä¸ä»…æ‰¿æ‹…è¯·æ±‚è½¬å‘çš„åŠŸèƒ½ï¼Œè¿˜åœ¨å®‰å…¨ã€ç¨³å®šæ€§ã€æ€§èƒ½ä¼˜åŒ–ç­‰æ–¹é¢å‘æŒ¥ç€é‡è¦ä½œç”¨ã€‚

---

## ğŸ“Œ æ ¸å¿ƒåŠŸèƒ½ä¸€è§ˆ

| åŠŸèƒ½ç±»åˆ« | ä½œç”¨è¯´æ˜ |
|----------|----------|
| è·¯ç”±è½¬å‘ | å°†å¤–éƒ¨è¯·æ±‚æŒ‰ç…§é…ç½®è·¯ç”±è‡³å¯¹åº”çš„æœåŠ¡æˆ–æ¥å£ |
| è´Ÿè½½å‡è¡¡ | åœ¨å¤šä¸ªå®ä¾‹é—´åˆ†å‘è¯·æ±‚ï¼Œæ”¯æŒéšæœºã€è½®è¯¢ã€åŠ æƒç­‰ç®—æ³• |
| ç”¨æˆ·é‰´æƒ | ç»Ÿä¸€è®¤è¯ä¸æˆæƒé€»è¾‘ï¼Œä¿éšœæ¥å£è®¿é—®å®‰å…¨ |
| è·¨åŸŸå¤„ç† | å…¨å±€é…ç½® CORSï¼Œæ— éœ€å„æœåŠ¡å•ç‹¬å®ç° |
| é€šç”¨é€»è¾‘å°è£… | ç»Ÿä¸€å¤„ç†è¯·æ±‚é¢‘æ¬¡ã€æ—¥å¿—ã€å…¬å…±å‚æ•°ç­‰é€šç”¨ä¸šåŠ¡ |
| é»‘ç™½åå• | åŸºäº IPã€ç”¨æˆ· ID æ§åˆ¶è®¿é—®æƒé™ï¼Œæœ‰æ•ˆæŠµå¾¡æ¶æ„è¯·æ±‚ |
| ç°åº¦å‘å¸ƒ | åŸºäºæƒé‡å®ç°æµé‡åˆ†å‘ï¼Œå®ç°æ¥å£/ç‰ˆæœ¬é€æ­¥ä¸Šçº¿ |
| æµé‡æŸ“è‰² | æ·»åŠ è‡ªå®šä¹‰ Headerï¼Œç”¨äº A/B æµ‹è¯•ã€è°ƒè¯•ã€è¿½è¸ªç­‰ |
| æ¥å£ä¿æŠ¤ | å®ç°é™æµã€ç†”æ–­ã€é™çº§ã€è¶…æ—¶æ§åˆ¶ã€æ•æ„Ÿä¿¡æ¯è„±æ• |
| æ—¥å¿—èšåˆ | æ”¶é›†ç»Ÿä¸€è¯·æ±‚æ—¥å¿—ï¼Œä¾¿äºç›‘æ§ã€å‘Šè­¦ã€å®¡è®¡ |
| æ–‡æ¡£èšåˆ | èšåˆå„æœåŠ¡çš„ API æ–‡æ¡£ï¼Œç»Ÿä¸€å±•ç¤ºä¸ç»´æŠ¤ |

---

## ğŸ”§ åŠŸèƒ½è¯¦è§£

### 1. è·¯ç”±è½¬å‘ï¼ˆRoutingï¼‰
API ç½‘å…³æ ¹æ®é…ç½®è§„åˆ™å°†è¯·æ±‚è½¬å‘è‡³ç›®æ ‡æœåŠ¡æˆ–æ¥å£ï¼Œæ˜¯ç½‘å…³çš„åŸºç¡€èŒè´£ä¹‹ä¸€ã€‚æ”¯æŒé™æ€ URI è·¯ç”±ã€Path åŒ¹é…ã€æ­£åˆ™åŒ¹é…ã€Header/Query å‚æ•°è·¯ç”±ç­‰æ–¹å¼ã€‚

### 2. è´Ÿè½½å‡è¡¡ï¼ˆLoad Balancingï¼‰
åœ¨å­˜åœ¨å¤šä¸ªåç«¯å®ä¾‹çš„æƒ…å†µä¸‹ï¼Œç½‘å…³å¯ä»¥æ ¹æ®ç­–ç•¥å°†è¯·æ±‚åˆ†å‘è‡³ä¸åŒå®ä¾‹ã€‚å¸¸è§ç­–ç•¥åŒ…æ‹¬ï¼š
- è½®è¯¢ï¼ˆRound-Robinï¼‰
- éšæœºï¼ˆRandomï¼‰
- æƒé‡ï¼ˆWeight-Basedï¼‰
- æœ€å°‘è¿æ¥æ•°ï¼ˆLeast Connectionï¼‰

### 3. ç”¨æˆ·é‰´æƒï¼ˆAuthentication & Authorizationï¼‰
æ”¯æŒå¤šç§é‰´æƒæ–¹å¼ï¼Œå¦‚ï¼š
- Token/JWT æ ¡éªŒ
- OAuth2.0 / OpenID Connect
- ä¸èº«ä»½ä¸­å¿ƒé›†æˆï¼ˆå¦‚ Keycloakã€Auth0ï¼‰

ç»Ÿä¸€é‰´æƒå¯ä»¥é˜²æ­¢ç»•è¿‡å•ä¸ªæœåŠ¡è¿›è¡Œéæ³•è®¿é—®ã€‚

### 4. ç»Ÿä¸€è·¨åŸŸå¤„ç†ï¼ˆCORSï¼‰
é€šè¿‡å…¨å±€é…ç½®è·¨åŸŸç­–ç•¥ï¼ˆå¦‚ `Access-Control-Allow-Origin`ï¼‰ï¼Œé¿å…æ¯ä¸ªæœåŠ¡ç‹¬ç«‹é…ç½®ï¼Œæé«˜å‰åç«¯åä½œæ•ˆç‡ã€‚

### 5. ç»Ÿä¸€ä¸šåŠ¡é€»è¾‘å°è£…
å¦‚ï¼šæ¥å£è°ƒç”¨è®¡æ•°ã€å…¬å…±å‚æ•°æ ¡éªŒã€é€šç”¨å¼‚å¸¸å¤„ç†ç­‰ï¼Œåœ¨ç½‘å…³å±‚ç»Ÿä¸€å°è£…ï¼Œæå‡ä»£ç å¤ç”¨æ€§ï¼Œé™ä½æœåŠ¡é‡å¤å®ç°æˆæœ¬ã€‚

### 6. é»‘ç™½åå•è®¿é—®æ§åˆ¶
- ç™½åå•ï¼šå…è®¸ç‰¹å®š IPã€åº”ç”¨ã€ç”¨æˆ·è®¿é—®ã€‚
- é»‘åå•ï¼šé˜»æ­¢æ¶æ„è¯·æ±‚ã€å°ç¦é«˜é¢‘è®¿é—®è€…ã€‚

é€‚ç”¨äºå®‰å…¨é˜²æŠ¤å’Œé£æ§ç³»ç»Ÿã€‚

### 7. ç°åº¦å‘å¸ƒï¼ˆå‘å¸ƒæ§åˆ¶ï¼‰
é€šè¿‡æµé‡æƒé‡æ§åˆ¶ç­–ç•¥ï¼ˆWeighted Routingï¼‰å°†éƒ¨åˆ†è¯·æ±‚å¼•å¯¼åˆ°æ–°ç‰ˆæœ¬æ¥å£ï¼Œå®ç°ï¼š
- ä½é£é™©ä¸Šçº¿
- æ¥å£ A/B å¯¹æ¯”
- å®æ—¶å›æ»šåˆ‡æ¢

### 8. æµé‡æŸ“è‰²ï¼ˆTraffic Taggingï¼‰
é€šè¿‡æ·»åŠ è¯·æ±‚æ ‡è¯†ï¼ˆå¦‚è¯·æ±‚å¤´ Headerï¼‰ï¼Œå¯¹æµé‡è¿›è¡Œâ€œæŸ“è‰²â€ï¼Œå®ç°ä¸åŒç±»å‹ç”¨æˆ·æˆ–æ¥æºæµé‡çš„åˆ†ç»„ç®¡ç†ï¼Œå¸¸ç”¨äºï¼š
- ç°åº¦æµ‹è¯•
- é¢„å‘ç¯å¢ƒéš”ç¦»
- æµé‡å›æº¯ä¸è¿½è¸ª

### 9. æ¥å£ä¿æŠ¤æœºåˆ¶

| åŠŸèƒ½ | è¯´æ˜ |
|------|------|
| è¯·æ±‚é™åˆ¶ | æ§åˆ¶å¹¶å‘æ•°ã€QPSï¼Œé˜²æ­¢æœåŠ¡è¿‡è½½ |
| é™æµï¼ˆRate Limitingï¼‰ | é…ç½®æ¯ç§’æœ€å¤§è¯·æ±‚æ•°ï¼ˆå¦‚ä»¤ç‰Œæ¡¶ã€æ¼æ¡¶ç®—æ³•ï¼‰ |
| ç†”æ–­ï¼ˆCircuit Breakerï¼‰ | åç«¯æœåŠ¡ä¸å¯ç”¨æ—¶è‡ªåŠ¨ç†”æ–­ï¼Œå¿«é€Ÿå¤±è´¥ |
| é™çº§å¤„ç† | åç«¯å¼‚å¸¸æ—¶è¿”å›é»˜è®¤å€¼æˆ–å…œåº•å“åº”ï¼Œä¿éšœä½“éªŒ |
| è¶…æ—¶æ§åˆ¶ | è¯·æ±‚è¶…æ—¶è‡ªåŠ¨å–æ¶ˆï¼Œé˜²æ­¢æœåŠ¡é˜»å¡ |
| ä¿¡æ¯è„±æ• | è„±æ•è¿”å›å€¼ä¸­çš„æ•æ„Ÿå­—æ®µï¼ˆå¦‚æ‰‹æœºå·ã€èº«ä»½è¯å·ï¼‰ |

### 10. æ—¥å¿—ç»Ÿä¸€é‡‡é›†
å¯¹è¯·æ±‚å…¨ç”Ÿå‘½å‘¨æœŸï¼ˆè¯·æ±‚æ—¶é—´ã€æº IPã€å“åº”ç ã€è€—æ—¶ã€é”™è¯¯ä¿¡æ¯ç­‰ï¼‰è¿›è¡Œè®°å½•ï¼Œä¾¿äºåç»­ï¼š
- é“¾è·¯è¿½è¸ª
- æ€§èƒ½ç›‘æ§
- å®‰å…¨å®¡è®¡

### 11. API æ–‡æ¡£èšåˆ
è‡ªåŠ¨èšåˆå„ä¸‹æ¸¸æœåŠ¡çš„ Swagger/OpenAPI æ–‡æ¡£ï¼Œç»Ÿä¸€åœ¨ä¸€ä¸ªç•Œé¢å±•ç¤ºï¼Œæé«˜å›¢é˜Ÿåä½œä¸æ¥å£ç®¡ç†æ•ˆç‡ã€‚

---

## ğŸ§­ ç½‘å…³ç±»å‹åˆ†ç±»

| ç±»å‹ | è¯´æ˜ |
|------|------|
| ä¸šåŠ¡ç½‘å…³ï¼ˆå¾®æœåŠ¡ç½‘å…³ï¼‰ | ä½äºæœåŠ¡ä¸­é—´å±‚ï¼Œè´Ÿè´£æœåŠ¡æ‹†åˆ†åå¾®æœåŠ¡ä¹‹é—´çš„æµé‡è°ƒåº¦ä¸æ²»ç†ï¼ˆå¦‚ Spring Cloud Gatewayï¼‰ |
| å…¨å±€ç½‘å…³ï¼ˆè¾¹ç¼˜ç½‘å…³ï¼‰ | ä½äºç³»ç»Ÿå…¥å£å±‚ï¼Œè¿æ¥å¤–éƒ¨ç”¨æˆ·ä¸å†…ç½‘æœåŠ¡ï¼Œæ‰¿æ‹…æ›´å¤æ‚çš„åè®®è½¬æ¢ã€å®‰å…¨è¿‡æ»¤ã€è®¾å¤‡æ¥å…¥ï¼ˆå¦‚ Nginxã€Kongï¼‰ |

---

## ğŸš€ ä¸»æµç½‘å…³å®ç°æ–¹æ¡ˆ

| åç§° | ç®€ä»‹ |
|------|------|
| **Nginx** | é«˜æ€§èƒ½åå‘ä»£ç†ï¼Œå¹¿æ³›ç”¨äºé™æ€èµ„æºåˆ†å‘ã€è¯·æ±‚è½¬å‘ |
| **Kong** | ä¼ä¸šçº§ API ç½‘å…³ï¼Œæ”¯æŒæ’ä»¶æ‰©å±•ï¼Œå…¼å®¹ REST å’Œ gRPC |
| **Spring Cloud Gateway** | Spring ç”Ÿæ€ä¸­çš„å“åº”å¼ç½‘å…³ï¼Œé›†æˆæ–¹ä¾¿ï¼Œæ”¯æŒè·¯ç”±ã€è¿‡æ»¤å™¨ã€é™æµã€æ–­è·¯å™¨ç­‰ |
| **Zuulï¼ˆå·²è¿‡æ—¶ï¼‰** | Netflix æ¨å‡ºçš„ç½‘å…³ï¼Œç°å·²è¢« Spring å®˜æ–¹æ¨èæ›¿ä»£ä¸º Gateway |

---

## âœ… æ€»ç»“

API ç½‘å…³å¹¶éåªæ˜¯â€œæµé‡å…¥å£â€ï¼Œå®ƒæ›´æ˜¯**æœåŠ¡æ²»ç†ã€ç³»ç»Ÿå®‰å…¨ä¸ç»Ÿä¸€è§„èŒƒçš„ä¸­æ¢æ§åˆ¶å™¨**ã€‚é€šè¿‡åˆç†é…ç½®å’Œå®šåˆ¶æ‰©å±•ï¼ŒAPI ç½‘å…³å¯ä»¥ä¸ºåˆ†å¸ƒå¼ç³»ç»Ÿæä¾›ï¼š
- é«˜å¯ç”¨æ€§ä¿éšœ
- é«˜æ€§èƒ½è¯·æ±‚è°ƒåº¦
- å®‰å…¨ç»Ÿä¸€æ§åˆ¶
- æ¥å£å¯è§‚æµ‹ä¸å¯è¿½è¸ªæ€§

---

> ğŸ“– å‚è€ƒé˜…è¯»å®ç°KONGç½‘å…³ï¼š[KONG å®è·µæŒ‡å—ï¼ˆCSDNï¼‰](https://blog.csdn.net/qq_21040559/article/details/122961395)

